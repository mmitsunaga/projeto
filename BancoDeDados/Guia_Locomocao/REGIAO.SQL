CREATE TABLE PROJUDI.REGIAO (	
    ID_REGIAO       NUMBER(10,0)  NOT NULL, 
	REGIAO_CODIGO   NUMBER(10,0)  NOT NULL, 
	REGIAO          VARCHAR2(255) NOT NULL, 
	ID_COMARCA      NUMBER(10,0)  NOT NULL,
    CODIGO_TEMP     NUMBER(10,0)
);

CREATE UNIQUE INDEX PROJUDI.REGIAO_IDXPK ON PROJUDI.REGIAO (ID_REGIAO);

ALTER TABLE PROJUDI.REGIAO ADD CONSTRAINT PK_REGIAO PRIMARY KEY(ID_REGIAO);

CREATE INDEX PROJUDI.REGIAO_IDX1 ON PROJUDI.REGIAO (ID_COMARCA);

ALTER TABLE PROJUDI.REGIAO ADD CONSTRAINT REGIAO_COMARCA_FK FOREIGN KEY (ID_COMARCA) REFERENCES PROJUDI.COMARCA (ID_COMARCA);

CREATE UNIQUE INDEX PROJUDI.REGIAOCODIGO ON PROJUDI.REGIAO (REGIAO_CODIGO, ID_COMARCA);

CREATE SEQUENCE  PROJUDI.Regiao_Id_Regiao_SEQ  MINVALUE 1 MAXVALUE 9999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE ;

CREATE OR REPLACE TRIGGER PROJUDI.REGIAO_ID_REGIAO_TRG BEFORE INSERT OR UPDATE ON Regiao
FOR EACH ROW
DECLARE
v_newVal NUMBER(12) := 0;
v_incval NUMBER(12) := 0;
BEGIN
  IF INSERTING AND :new.Id_Regiao IS NULL THEN
    SELECT  Regiao_Id_Regiao_SEQ.NEXTVAL INTO v_newVal FROM DUAL;
    :new.Id_Regiao := v_newVal;
  END IF;
END;

ALTER TRIGGER PROJUDI.REGIAO_ID_REGIAO_TRG ENABLE;
