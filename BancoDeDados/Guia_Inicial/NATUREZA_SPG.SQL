CREATE TABLE PROJUDI.NATUREZA_SPG
(	
   ID_NATUREZA_SPG         NUMBER(24,0)   NOT NULL, 
   NATUREZA_SPG            VARCHAR2(255)  NOT NULL, 
   NATUREZA_SPG_CODIGO     NUMBER(10,0)   NOT NULL,
   CODIGO_TEMP             NUMBER(10,0)    
);

CREATE UNIQUE INDEX PROJUDI.NATUREZA_SPG_IDXPK ON PROJUDI.NATUREZA_SPG (ID_NATUREZA_SPG);

ALTER TABLE PROJUDI.NATUREZA_SPG ADD CONSTRAINT PK_NATUREZA_SPG PRIMARY KEY(ID_NATUREZA_SPG);

CREATE UNIQUE INDEX PROJUDI.NATUREZA_SPG_IDX1 ON PROJUDI.NATUREZA_SPG (NATUREZA_SPG_CODIGO);

CREATE SEQUENCE  PROJUDI.NATUREZA_SPG_IDNATUREZASPG_SEQ  MINVALUE 1 MAXVALUE 9999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  NOCYCLE ;

CREATE OR REPLACE TRIGGER PROJUDI.NATUREZA_SPG_IDNATUREZASPG_TRG BEFORE INSERT OR UPDATE ON NATUREZA_SPG
FOR EACH ROW
DECLARE
v_newVal NUMBER(12) := 0;
v_incval NUMBER(12) := 0;
BEGIN
  IF INSERTING AND :new.ID_NATUREZA_SPG IS NULL THEN
    SELECT NATUREZA_SPG_IDNATUREZASPG_SEQ.NEXTVAL INTO v_newVal FROM DUAL;
   
   :new.ID_NATUREZA_SPG := v_newVal;
  END IF;
END;

ALTER TRIGGER PROJUDI.NATUREZA_SPG_IDNATUREZASPG_TRG ENABLE;

CREATE OR REPLACE FORCE VIEW PROJUDI.VIEW_NATUREZA_SPG AS 
  SELECT
    N.ID_NATUREZA_SPG AS ID_NATUREZA_SPG,
    N.NATUREZA_SPG AS NATUREZA_SPG,
    N.NATUREZA_SPG_CODIGO AS NATUREZA_SPG_CODIGO,    
	N.CODIGO_TEMP AS CODIGO_TEMP
  FROM 
    NATUREZA_SPG N;