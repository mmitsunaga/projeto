ALTER TABLE PROJUDI.PROC_PARTE_DEBITO_FISICO ADD ID_PROC_DEBITO_STATUS NUMBER(24,0) NULL;

CREATE INDEX PROJUDI.PROC_PARTE_DEB_FIS_IDSTAT_IDX ON PROJUDI.PROC_PARTE_DEBITO_FISICO (ID_PROC_DEBITO_STATUS);

ALTER TABLE PROJUDI.PROC_PARTE_DEBITO_FISICO ADD CONSTRAINT PROCPARTEDEBF_PROCDEBSTATUS_FK FOREIGN KEY (ID_PROC_DEBITO_STATUS) REFERENCES PROJUDI.PROC_DEBITO_STATUS (ID_PROC_DEBITO_STATUS);

UPDATE PROJUDI.PROC_PARTE_DEBITO_FISICO SET ID_PROC_DEBITO_STATUS = 1;

UPDATE PROJUDI.PROC_PARTE_DEBITO_FISICO SET ID_PROC_DEBITO_STATUS = 5 WHERE LIBERADO_CADIN = '1';

ALTER TABLE PROJUDI.PROC_PARTE_DEBITO_FISICO MODIFY LIBERADO_CADIN CHAR(2) NULL;

ALTER TABLE PROJUDI.PROC_PARTE_DEBITO_FISICO DROP COLUMN STATUS;

ALTER TABLE PROJUDI.PROC_PARTE_DEBITO_FISICO DROP COLUMN LIBERADO_CADIN;

ALTER TABLE PROJUDI.PROC_PARTE_DEBITO_FISICO MODIFY ID_PROC_DEBITO_STATUS NUMBER(24,0) NOT NULL ENABLE;

ALTER TABLE PROJUDI.PROC_PARTE_DEBITO_FISICO ADD DIVIDA_SOLIDARIA CHAR(1) DEFAULT '0';



CREATE OR REPLACE FORCE VIEW PROJUDI.VIEW_PROC_PARTE_DEBITO_FISICO AS 
  SELECT PPD.ID_PROC_PARTE_DEBITO_FISICO AS ID_PROC_PARTE_DEBITO_FISICO,
	PPD.ID_PROC_DEBITO                   AS ID_PROC_DEBITO,
	PD.PROC_DEBITO                       AS PROC_DEBITO,
	PPD.PROC_NUMERO                      AS PROC_NUMERO,
	PPD.CODG_ESCRIVANIA                  AS CODG_ESCRIVANIA,
	PPD.DESC_ESCRIVANIA                  AS DESC_ESCRIVANIA,
	PPD.ISN_PARTE                        AS ISN_PARTE,
	PPD.NOME_PARTE                       AS NOME_PARTE,
	PPD.NOME_SIMPLIFICADO                AS NOME_SIMPLIFICADO,
	PPD.TIPO_PARTE                       AS TIPO_PARTE,
	PPD.CPF_CNPJ_PARTE                   AS CPF_CNPJ_PARTE,
	PPD.NUMERO_GUIA_COMPLETO             AS NUMERO_GUIA_COMPLETO,
	PPD.VALOR_GUIA                       AS VALOR_GUIA,
	PPD.NUMERO_PROAD                     AS NUMERO_PROAD,
	PPD.ID_PROC_DEBITO_STATUS            AS ID_PROC_DEBITO_STATUS,
	PDS.PROC_DEBITO_STATUS               AS PROC_DEBITO_STATUS,
	PPD.DATA_BAIXA                       AS DATA_BAIXA,
	PPD.DIVIDA_SOLIDARIA                 AS DIVIDA_SOLIDARIA,
	PPD.CODIGO_TEMP                      AS CODIGO_TEMP
  FROM PROJUDI.PROC_PARTE_DEBITO_FISICO PPD
  INNER JOIN PROJUDI.PROC_DEBITO PD ON PD.ID_PROC_DEBITO = PPD.ID_PROC_DEBITO
  INNER JOIN PROJUDI.PROC_DEBITO_STATUS PDS ON PDS.ID_PROC_DEBITO_STATUS = PPD.ID_PROC_DEBITO_STATUS;
